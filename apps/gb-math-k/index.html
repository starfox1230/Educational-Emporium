<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no">
    <title>Interactive Learning Hub - Creator</title>
    <style>
        body {
            background-color: #f4f7f6;
            font-family: -apple-system, BlinkMacSystemFont, 'Segoe UI', Roboto, Helvetica, Arial, sans-serif;
            margin: 0;
            padding: 20px;
        }
        .container {
            max-width: 900px;
            margin: 20px auto;
            background-color: #ffffff;
            padding: 30px 40px;
            border-radius: 12px;
            box-shadow: 0 6px 12px rgba(0,0,0,0.1);
        }
        h1 {
            text-align: center;
            color: #1a5276;
            border-bottom: 2px solid #aed6f1;
            padding-bottom: 15px;
        }
        h2 {
            color: #2e86c1;
            margin-top: 40px;
        }
        ul {
            list-style-type: none;
            padding: 0;
        }
        li a {
            display: block;
            padding: 12px 15px;
            margin-bottom: 8px;
            background-color: #f9f9f9;
            color: #34495e;
            text-decoration: none;
            border-left: 5px solid #bdc3c7;
            transition: transform 0.2s, background-color 0.2s;
        }
        li a:hover {
            background-color: #ecf0f1;
            transform: translateX(5px);
        }
        .unit-1-link { border-left-color: #3498db; }
        .unit-2-link { border-left-color: #27ae60; }
        .unit-3-link { border-left-color: #e67e22; }
        .assessment-link {
            background-color: #eaf2f8;
            font-weight: bold;
        }
        .unit-1-assessment { border-left-color: #2e86c1; color: #1a5276; }
        .unit-2-assessment { border-left-color: #229954; color: #196f3d; background-color: #d5f5e3; }
        .unit-3-assessment { border-left-color: #d35400; color: #af601a; background-color: #fdebd0; }

        /* Creation Tool Styles */
        .toggle-button {
            display: block;
            width: 100%;
            padding: 15px;
            font-size: 1.1em;
            font-weight: bold;
            color: #fff;
            background-color: #2980b9;
            border: none;
            border-radius: 8px;
            cursor: pointer;
            margin-bottom: 20px;
            transition: background-color 0.2s;
        }
        .toggle-button:hover { background-color: #3498db; }
        
        #creation-tool {
            padding: 20px;
            border: 2px dashed #aed6f1;
            background-color: #f8f9fa;
            border-radius: 8px;
            margin-bottom: 30px;
        }
        #creation-tool p { line-height: 1.6; }
        #creation-tool label {
            display: block;
            font-weight: bold;
            margin-top: 15px;
            margin-bottom: 5px;
            color: #1a5276;
        }
        #lesson-selector {
            width: 100%;
            padding: 10px;
            border-radius: 5px;
            border: 1px solid #ccc;
            font-size: 1em;
        }
        .output-container {
            display: flex;
            gap: 10px;
            align-items: center;
        }
        .output-container input[type="text"] {
            flex-grow: 1;
            padding: 10px;
            border-radius: 5px;
            border: 1px solid #ccc;
            background-color: #e9ecef;
            font-family: monospace;
        }
        .output-container button, #copy-prompt-btn {
            padding: 10px 15px;
            font-size: 0.9em;
            color: #fff;
            background-color: #27ae60;
            border: none;
            border-radius: 5px;
            cursor: pointer;
            white-space: nowrap;
            transition: background-color 0.2s;
        }
        .output-container button:hover, #copy-prompt-btn:hover { background-color: #2ecc71; }
        
        #prompt-output {
            width: 100%;
            box-sizing: border-box;
            height: 250px;
            padding: 10px;
            border-radius: 5px;
            border: 1px solid #ccc;
            background-color: #e9ecef;
            font-family: monospace;
            font-size: 0.9em;
            line-height: 1.4;
        }
        #copy-prompt-btn {
            display: block;
            width: 100%;
            margin-top: 10px;
        }
        .ai-link {
            display: inline-block;
            margin-top: 15px;
            padding: 10px 20px;
            background-color: #884ea0;
            color: white;
            text-decoration: none;
            border-radius: 5px;
            font-weight: bold;
            transition: background-color 0.2s;
        }
        .ai-link:hover {
             background-color: #9b59b6;
        }
    </style>
</head>
<body>

    <div class="container">

        <h1>Interactive Textbook Navigator</h1>

        <!-- CREATION HELPER TOOL -->
        <button id="toggle-tool-btn" class="toggle-button">Show Game Creation Helper</button>
        <div id="creation-tool" style="display: none;">
            <h2>Game Creation Helper</h2>
            <p>Follow these steps to generate a new lesson game:</p>
            <ol>
                <li>Select the lesson you want to create from the dropdown menu.</li>
                <li>Click <strong>Copy Filename</strong> and create a new empty HTML file with that exact name.</li>
                <li>Click <strong>Copy Prompt</strong> to copy the complete instructions for the AI.</li>
                <li>Go to the AI tool, paste the prompt, and add the specific lesson details at the end.</li>
                <li>Copy the AI's generated code and paste it into your new file.</li>
            </ol>
            
            <label for="lesson-selector">1. Select a Lesson:</label>
            <select id="lesson-selector">
                <option value="" disabled selected>-- Choose a lesson to begin --</option>
            </select>

            <div id="tool-outputs" style="display: none;">
                <label for="filename-output">2. Required Filename:</label>
                <div class="output-container">
                    <input type="text" id="filename-output" readonly>
                    <button id="copy-filename-btn">Copy Filename</button>
                </div>

                <label for="prompt-output">3. Master Prompt for AI:</label>
                <textarea id="prompt-output" readonly></textarea>
                <button id="copy-prompt-btn">Copy Prompt</button>

                <p style="margin-top: 20px;"><strong>4. Go to the AI Tool:</strong></p>
                <a href="https://aistudio.google.com/" target="_blank" class="ai-link">Open Google AI Studio</a>
            </div>
        </div>

        <hr style="border: none; border-top: 1px solid #ccc; margin: 40px 0;">

        <!-- FULL LESSON LIST -->
        <h2>Introduction</h2>
        <ul>
            <li><a href="hundreds-chart.html" class="unit-1-link">Hundreds Chart</a></li>
            <li><a href="about.html" class="unit-1-link">About the Course</a></li>
            <li><a href="faq.html" class="unit-1-link">Frequently Asked Questions</a></li>
        </ul>

        <h2>Unit 1</h2>
        <ul id="unit-1-list">
            <!-- Lessons will be dynamically added here by JS -->
        </ul>
        
        <h2>Unit 2</h2>
        <ul id="unit-2-list">
            <!-- Lessons will be dynamically added here by JS -->
        </ul>
        
        <h2>Unit 3</h2>
        <ul id="unit-3-list">
            <!-- Lessons will be dynamically added here by JS -->
        </ul>
        
    </div>

    <script>
    document.addEventListener('DOMContentLoaded', function() {
        
        const masterPrompt = `You are an expert educational game developer specializing in creating engaging, self-contained, and touch-friendly web applications for young children (ages 4-7).

**Your Core Task:**
I will provide you with content from a single lesson of a children's textbook. Your task is to create a complete, self-contained, interactive educational mini-game in a single HTML file that teaches the lesson's concept and then tests it with a fun, replayable activity.

**--- CRITICAL REQUIREMENTS ---**

**1. Technical & Asset Rules:**
*   **Single File Output:** The entire game, including all logic and styling, must be in one \`.html\` file.
*   **Inline Resources Only:** All CSS must be in a \`<style>\` block and all JavaScript must be in a \`<script>\` block.
*   **No External Files:** Do not use external images (\`.png\`, \`.jpg\`), audio files (\`.mp3\`), or fonts.
*   **Programmatic Assets:** All visuals must be generated using embedded SVG or pure CSS. All audio must be generated using the browser's Web Speech API for Text-to-Speech (TTS).

**2. Kid-Proof User Experience (UX) Rules:**
This is the most important part. The app must be hardened against common usability issues on touch screens.

*   **Implement Anti-Zoom and Multi-Touch Protection:** The app must be immune to accidental zooming.
    *   **HTML:** Use this specific, strict \`<meta name="viewport">\` tag in the \`<head>\`:
        \`<meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no">\`
    *   **JavaScript:** Create a NEW, SEPARATE \`<script>\` block just before the closing \`</body>\` tag and place this code inside it to intercept and prevent multi-touch browser gestures:
        \`document.addEventListener('gesturestart', (e) => e.preventDefault(), { passive: false });
          document.addEventListener('touchstart', (e) => { if (e.touches.length > 1) e.preventDefault(); }, { passive: false });\`

*   **Disable Text Selection and Tap Highlights:** The user should never be able to accidentally select text or see system highlights on tap.
    *   **CSS:** Apply the following CSS rules to the \`body\`:
        \`body {
          -webkit-tap-highlight-color: transparent;
          -webkit-user-select: none;
          -moz-user-select: none;
          -ms-user-select: none;
          user-select: none;
        }\`

**3. Standard Game Structure:**
Every game must follow this two-part structure:

*   **Part 1: The Interactive Lesson:** A guided, interactive section to teach the core concept. It must state the goal, use TTS for instructions, and provide positive feedback.
*   **Part 2: The Replayable Game:** A fun, repeatable game loop to test the concept.
    *   It should randomize slightly on each playthrough.
    *   It must provide immediate, clear feedback for correct/incorrect answers.
    *   **Implement a "State Reset Pattern":** To prevent "ghost selections" where a button retains its appearance from a previous question, you must create a dedicated function to reset the UI before each new question. This function must remove all dynamic CSS classes (like \`.correct\`, \`.incorrect\`, \`.selected\`) from all interactive elements and reset any state variables. This reset function must be called *before* setting up the next question.

**4. Special Feature - Drawing Canvas:**
*   If the lesson involves writing or tracing, you **must** include an HTML \`<canvas>\` element with drawing functionality.
*   **Special Rule for Tracing '1':** To ensure the tracing guide for the number '1' is a simple vertical line, you must programmatically replace the digit \`1\` with a lowercase letter \`l\` *only for the visual guide drawn on the canvas*. Any data variables or text passed to the TTS function must still use the correct digit \`1\`.

---
**[START OF LESSON CONTENT]**

*(Paste the lesson description, a transcription of the text, or an image here.)*

**[END OF LESSON CONTENT]**`;
        
        const lessons = [
            // Unit 1
            { unit: 1, number: 1, title: 'Numbers 1 to 3' },
            { unit: 1, number: 2, title: 'Ten Frames' },
            { unit: 1, number: 3, title: 'Numbers 4 to 5' },
            { unit: 1, number: 4, title: 'Order of Events' },
            { unit: 1, number: 5, title: 'Position Words' },
            { unit: 1, number: 6, title: 'Number Practice' },
            { unit: 1, number: 7, title: 'Numbers 6 to 7' },
            { unit: 1, number: 8, title: 'Matching: Part 1' },
            { unit: 1, number: 9, title: 'Numbers 8 to 9' },
            { unit: 1, number: 10, title: 'Ordinal Numbers: Part 1' },
            { unit: 1, number: 11, title: 'Numbers 10 to 11' },
            { unit: 1, number: 12, title: 'Ten Sticks: Part 1' },
            { unit: 1, number: 13, title: 'Plus and Equal Signs' },
            { unit: 1, number: 14, title: 'Ten Sticks: Part 2' },
            { unit: 1, number: 15, title: 'Counting to 30 Practice' },
            { unit: 1, number: 16, title: 'Addition' },
            { unit: 1, number: 17, title: 'Counting to 40 Practice' },
            { unit: 1, number: 18, title: 'Zero and Number 12' },
            { unit: 1, number: 19, title: 'Tally Marks up to 5' },
            { unit: 1, number: 20, title: 'Number Practice' },
            { unit: 1, number: 21, title: 'Counting to 60 Practice' },
            { unit: 1, number: 22, title: 'Number Practice' },
            { unit: 1, number: 23, title: 'Number Practice' },
            { unit: 1, number: 24, title: 'Number Practice' },
            { unit: 1, number: 25, title: 'The Teens: Part 1' },
            { unit: 1, number: 26, title: 'The Teens: Part 2' },
            { unit: 1, number: 27, title: 'Days of the Week' },
            { unit: 1, number: 28, title: 'Number Line Practice' },
            { unit: 1, number: 29, title: 'Ways to Make 5' },
            { unit: 1, number: 30, title: 'One More, One Less: Part 1' },
            { unit: 1, number: 31, title: 'Shapes' },
            { unit: 1, number: 32, title: 'Spatial Activities' },
            { unit: 1, number: 33, title: 'One More, One Less: Part 2' },
            { unit: 1, number: 34, title: 'Number Bonds: Part 1' },
            { unit: 1, number: 35, title: 'Making 4' },
            { unit: 1, number: 36, title: 'Addition Practice' },
            { unit: 1, number: 37, title: 'Ten Sticks: Part 3' },
            { unit: 1, number: 38, title: 'Longer and Shorter' },
            { unit: 1, number: '39-40', title: 'Unit Assessment', assessment: true },
            // Unit 2
            { unit: 2, number: 41, title: 'Tally Marks to 10' },
            { unit: 2, number: 42, title: 'Numbers 20 to 40: Part 1' },
            { unit: 2, number: 43, title: 'Triangles' },
            { unit: 2, number: 44, title: 'Hundreds Chart' },
            { unit: 2, number: 45, title: 'Counting by 10s' },
            { unit: 2, number: 46, title: 'Addition Practice' },
            { unit: 2, number: 47, title: 'Spatial Activities' },
            { unit: 2, number: 48, title: 'Place Value: Part 1' },
            { unit: 2, number: 49, title: 'Ordinal Numbers: Part 2' },
            { unit: 2, number: 50, title: 'Sorting by Color and Shape' },
            { unit: 2, number: 51, title: 'Introduction to Clocks' },
            { unit: 2, number: 52, title: 'Time: Part 1' },
            { unit: 2, number: 53, title: 'Writing the Number 20' },
            { unit: 2, number: 54, title: 'Numbers 20 to 40: Part 2' },
            { unit: 2, number: 55, title: 'Time: Part 2' },
            { unit: 2, number: 56, title: 'Right and Left: Part 1' },
            { unit: 2, number: 57, title: 'Addition Stories: Part 1' },
            { unit: 2, number: 58, title: 'Pattern Blocks' },
            { unit: 2, number: 59, title: 'One More, One Less: Part 3' },
            { unit: 2, number: 60, title: 'Equal and Not Equal' },
            { unit: 2, number: 61, title: 'Time: Part 3' },
            { unit: 2, number: 62, title: 'Addition Stories: Part 2' },
            { unit: 2, number: 63, title: 'Ordinal Numbers: Part 3' },
            { unit: 2, number: 64, title: 'Number Bonds: Part 2' },
            { unit: 2, number: 65, title: 'Counting Backward: 10 to 1' },
            { unit: 2, number: 66, title: 'Patterns: Part 1' },
            { unit: 2, number: 67, title: 'Numbers 40 to 60: Part 1' },
            { unit: 2, number: 68, title: 'Place Value: Part 2' },
            { unit: 2, number: 69, title: 'Time: Part 4' },
            { unit: 2, number: 70, title: 'Patterns: Part 2' },
            { unit: 2, number: 71, title: 'Right and Left: Part 2' },
            { unit: 2, number: 72, title: 'The Calendar: Part 1' },
            { unit: 2, number: 73, title: 'Numbers 40 to 60: Part 2' },
            { unit: 2, number: 74, title: 'Reading and Creating Graphs' },
            { unit: 2, number: 75, title: 'Matching: Part 2' },
            { unit: 2, number: 76, title: 'Estimating' },
            { unit: 2, number: 77, title: 'Vertical Addition' },
            { unit: 2, number: 78, title: 'Number Patterns' },
            { unit: 2, number: '79-80', title: 'Unit Assessment', assessment: true },
            // Unit 3
            { unit: 3, number: 81, title: 'Counting by 2s' },
            { unit: 3, number: 82, title: 'Comparing Numbers' },
            { unit: 3, number: 83, title: 'The Calendar: Part 2' },
            { unit: 3, number: 84, title: 'Heavier or Lighter' },
            { unit: 3, number: 85, title: 'Even and Odd' },
            { unit: 3, number: 86, title: 'Even and Odd Games' },
            { unit: 3, number: 87, title: 'Numbers 60 to 80: Part 1' },
            { unit: 3, number: 88, title: 'Doubles Addition to 4 + 4' },
            { unit: 3, number: 89, title: 'The Penny and the Nickel' },
            { unit: 3, number: 90, title: 'Counting Backward: 20 to 1' },
            { unit: 3, number: 91, title: 'Numbers 60 to 80: Part 2' },
            { unit: 3, number: 92, title: 'Counting by 5s' },
            { unit: 3, number: 93, title: 'Subtraction: Part 1' },
            { unit: 3, number: 94, title: 'Subtraction: Part 2' },
            { unit: 3, number: 95, title: 'The Dime' },
            { unit: 3, number: 96, title: 'Number Bonds: Part 3' },
            { unit: 3, number: 97, title: 'Ordinal Numbers: Part 4' },
            { unit: 3, number: 98, title: 'Dividing Items in Half' },
            { unit: 3, number: 99, title: 'Measuring with Centimeters' },
            { unit: 3, number: 100, title: 'Measuring with Inches' },
            { unit: 3, number: 101, title: 'Dividing Groups in Half' },
            { unit: 3, number: 102, title: 'Addition with Pennies' },
            { unit: 3, number: 103, title: 'Making 10: Part 1' },
            { unit: 3, number: 104, title: 'Subtraction Game' },
            { unit: 3, number: 105, title: 'Comparing Volumes of Liquid' },
            { unit: 3, number: 106, title: '2D and 3D Shapes' },
            { unit: 3, number: 107, title: 'Spheres' },
            { unit: 3, number: 108, title: 'Months of the Year' },
            { unit: 3, number: 109, title: 'Practice Counting from 80 to 100' },
            { unit: 3, number: 110, title: 'Seasons' },
            { unit: 3, number: 111, title: 'Making 10: Part 2' },
            { unit: 3, number: 112, title: 'Subtraction Stories' },
            { unit: 3, number: 113, title: 'Patterns: Part 3' },
            { unit: 3, number: 114, title: 'Symmetry' },
            { unit: 3, number: 115, title: 'Time: Part 5' },
            { unit: 3, number: 116, title: 'Paying for Items Using Cents' },
            { unit: 3, number: 117, title: 'The Calendar: Part 3' },
            { unit: 3, number: 118, title: 'One More, One Less: Part 4' },
            { unit: 3, number: '119-120', title: 'Course Assessment', assessment: true }
        ];

        const lessonSelector = document.getElementById('lesson-selector');
        const unit1List = document.getElementById('unit-1-list');
        const unit2List = document.getElementById('unit-2-list');
        const unit3List = document.getElementById('unit-3-list');
        const toolOutputs = document.getElementById('tool-outputs');
        const filenameOutput = document.getElementById('filename-output');
        const promptOutput = document.getElementById('prompt-output');

        // Populate dropdown and lesson lists
        lessons.forEach(lesson => {
            const isAssessment = lesson.assessment;
            const lessonLabel = isAssessment ? `Lessons ${lesson.number}: ${lesson.title}` : `Lesson ${lesson.number}: ${lesson.title}`;
            const filename = `lesson-${lesson.number}.html`;

            // Populate Dropdown
            const option = document.createElement('option');
            option.value = filename;
            option.textContent = `Unit ${lesson.unit} - ${lessonLabel}`;
            option.dataset.lessonData = JSON.stringify(lesson);
            lessonSelector.appendChild(option);
            
            // Populate Main Lists
            const li = document.createElement('li');
            const a = document.createElement('a');
            a.href = filename;
            a.textContent = lessonLabel;
            a.classList.add(`unit-${lesson.unit}-link`);
            if (isAssessment) {
                a.classList.add('assessment-link', `unit-${lesson.unit}-assessment`);
            }
            li.appendChild(a);

            if (lesson.unit === 1) unit1List.appendChild(li);
            else if (lesson.unit === 2) unit2List.appendChild(li);
            else if (lesson.unit === 3) unit3List.appendChild(li);
        });

        // Toggle tool visibility
        const toggleBtn = document.getElementById('toggle-tool-btn');
        const creationTool = document.getElementById('creation-tool');
        toggleBtn.addEventListener('click', () => {
            const isHidden = creationTool.style.display === 'none';
            creationTool.style.display = isHidden ? 'block' : 'none';
            toggleBtn.textContent = isHidden ? 'Hide Game Creation Helper' : 'Show Game Creation Helper';
        });

        // Handle lesson selection
        lessonSelector.addEventListener('change', (e) => {
            if (!e.target.value) {
                toolOutputs.style.display = 'none';
                return;
            }
            filenameOutput.value = e.target.value;
            promptOutput.value = masterPrompt;
            toolOutputs.style.display = 'block';
        });

        // Handle copy buttons
        function setupCopyButton(buttonId, inputId, originalText) {
            const button = document.getElementById(buttonId);
            const input = document.getElementById(inputId);
            button.addEventListener('click', () => {
                navigator.clipboard.writeText(input.value).then(() => {
                    button.textContent = 'Copied!';
                    setTimeout(() => {
                        button.textContent = originalText;
                    }, 2000);
                }).catch(err => {
                    console.error('Failed to copy: ', err);
                });
            });
        }

        setupCopyButton('copy-filename-btn', 'filename-output', 'Copy Filename');
        setupCopyButton('copy-prompt-btn', 'prompt-output', 'Copy Prompt');
    });
    </script>
</body>
</html>